# Emerging Engine v4 â€” Reality-Based Edition â€” Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ

## âœ… Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾

### 1. Ð¡Ð¾Ð·Ð´Ð°Ð½ ÑƒÐ¿Ñ€Ð¾Ñ‰Ñ‘Ð½Ð½Ñ‹Ð¹ Emerging Engine v4
**Ð¤Ð°Ð¹Ð»:** `apps/worker/analysis/emerging_engine_v4.py`

**Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸:**
- `compute_emerging_score()` â€” Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð°: `log1p(recent_reviews_count_30d) * all_positive_ratio`
- `analyze_emerging()` â€” Ð°Ð½Ð°Ð»Ð¸Ð· Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸:
  1. Evergreen Filter (>= 50000 Ð¾Ñ‚Ð·Ñ‹Ð²Ð¾Ð²)
  2. Quality Filter (< 0.70 positive_ratio)
  3. Growth Filter (< 30 recent_reviews_30d)
  4. Score Threshold (< 2.0)

**Ð’ÐµÑ€Ð´Ð¸ÐºÑ‚Ñ‹ (ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€):**
- `emerging`
- `not_emerging`
- `steam_only_growth`
- `filtered_evergreen`
- `low_quality`
- `insufficient_signals`

### 2. ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½ diagnostics endpoint
**Ð¤Ð°Ð¹Ð»:** `apps/api/routers/trends_v1.py` (ÑÑ‚Ñ€Ð¾ÐºÐ° ~855)

**Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:**
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `steam_review_daily` (ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº)
- Ð£Ð±Ñ€Ð°Ð½Ñ‹ JOIN Ñ Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¼Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ð¼Ð¸ (`trends_raw_signals`, `trends_game_daily`)
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÑƒÐ¿Ñ€Ð¾Ñ‰Ñ‘Ð½Ð½Ñ‹Ð¹ `analyze_emerging()` Ð²Ð¼ÐµÑÑ‚Ð¾ `TrendsBrain`
- Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ‡ÐµÑÑ‚Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñ‹ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¸Ð³Ñ€

### 3. ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½ emerging endpoint (Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾)
**Ð¤Ð°Ð¹Ð»:** `apps/api/routers/trends_v1.py` (ÑÑ‚Ñ€Ð¾ÐºÐ° ~520)

**Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:**
- SQL Ð·Ð°Ð¿Ñ€Ð¾Ñ ÑƒÐ¿Ñ€Ð¾Ñ‰Ñ‘Ð½: ÑƒÐ±Ñ€Ð°Ð½Ñ‹ JOIN Ñ `trends_raw_signals`
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `steam_review_daily` Ð¸ `steam_app_cache`
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ `emerging_engine_v4`

**âš ï¸ TODO:** ÐÑƒÐ¶Ð½Ð¾ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº Ð°Ð½Ð°Ð»Ð¸Ð·Ð° (ÑÑ‚Ñ€Ð¾ÐºÐ¸ ~620-777), Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ `analyze_emerging()` Ð²Ð¼ÐµÑÑ‚Ð¾ `TrendsBrain.analyze_game()`

## ðŸ“‹ Ð§Ñ‚Ð¾ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ

### 1. Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ñ€ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð³ emerging endpoint
Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº Ð°Ð½Ð°Ð»Ð¸Ð·Ð° (ÑÑ‚Ñ€Ð¾ÐºÐ¸ ~620-777) Ð½Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `analyze_emerging()`:
- Ð£Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° `TrendsBrain`
- Ð£Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Reddit/YouTube/Steam News ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð²
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑƒÐ¿Ñ€Ð¾Ñ‰Ñ‘Ð½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð¸Ð· `EmergingResult`

### 2. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ system/summary
**Ð¤Ð°Ð¹Ð»:** `apps/api/routers/system_admin.py`

**ÐÑƒÐ¶Ð½Ð¾:**
- Ð£Ð±Ñ€Ð°Ñ‚ÑŒ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ `trends_raw_signals` (ÐµÑÐ»Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
- Ð£Ð±Ñ€Ð°Ñ‚ÑŒ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ `trend_jobs` (ÐµÑÐ»Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
- ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ (Steam Reviews Ð¸Ð· `steam_review_daily`)

### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†
ÐÐ°Ð¹Ñ‚Ð¸ Ð¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¼ÐµÑÑ‚Ð°, Ð³Ð´Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ:
- `trends_raw_signals` (ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
- `trend_jobs` (ÐµÑÐ»Ð¸ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚)
- `trends_game_daily` (ÐµÑÐ»Ð¸ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ emerging)

## ðŸ§ª ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° diagnostics
```bash
curl http://localhost:8000/api/v1/trends/emerging/diagnostics | jq '.'
```

ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
- `reasons` Ð¾Ð±ÑŠÑÑÐ½ÑÐµÑ‚ 100% Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½
- `almost_emerging` Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¸Ð³Ñ€Ñ‹ Ð±Ð»Ð¸Ð·ÐºÐ¸Ðµ Ðº Ð¿Ð¾Ñ€Ð¾Ð³Ñƒ
- ÐÐµÑ‚ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð¿Ñ€Ð¾ Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° emerging
```bash
curl http://localhost:8000/api/v1/trends/games/emerging?limit=10 | jq '.'
```

ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `steam_review_daily`
- Ð’ÐµÑ€Ð´Ð¸ÐºÑ‚Ñ‹ Ð¸Ð· ÑÑ‚Ñ€Ð¾Ð³Ð¾Ð³Ð¾ Ð½Ð°Ð±Ð¾Ñ€Ð°
- `signals_used` = `["steam_reviews"]`

## ðŸ“ ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹ (Ð¸Ð· Ð¢Ð—)

âœ… **Ð¡Ð¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¾:**
- ÐÐµ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
- ÐÐµ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ jobs/pipelines "Ð½Ð° Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ"
- ÐÐµ ÑÐ¸Ð¼ÑƒÐ»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- Ð›ÑƒÑ‡ÑˆÐµ 0 emerging, Ñ‡ÐµÐ¼ Ð»Ð¾Ð¶Ð½Ñ‹Ð¹ positive

âš ï¸ **Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:**
- Ð’ÑÐµ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ† ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹
- Emerging ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ on-the-fly (Ð½Ðµ Ñ‡ÐµÑ€ÐµÐ· jobs)
- System/summary Ñ‡ÐµÑÑ‚Ð½Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ
