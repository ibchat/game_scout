<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Scout - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ò–≥—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .header h1 { color: #1e3a8a; font-size: 32px; margin-bottom: 10px; }
        .header p { color: #666; font-size: 16px; }
        .nav {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .nav a, .action-btn {
            padding: 10px 20px;
            background: #e0e7ff;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        .nav a:hover, .action-btn:hover {
            background: #1e3a8a;
            color: white;
        }
        .action-btn.success { background: #10b981; color: white; }
        .action-btn.success:hover { background: #059669; }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .stat-card h3 {
            color: #999;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .stat-card .value { color: #333; font-size: 32px; font-weight: bold; }
        .games-grid { display: grid; gap: 20px; }
        .game-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }
        .game-title h2 { color: #333; font-size: 24px; margin-bottom: 5px; }
        .game-title .source { 
            color: #666; 
            font-size: 14px;
            text-transform: uppercase;
        }
        .source-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .source-steam { background: #171a21; color: #66c0f4; }
        .source-itch { background: #fa5c5c; color: white; }
        .analysis {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .analysis h4 {
            color: #065f46;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .analysis p {
            color: #047857;
            line-height: 1.6;
            font-size: 14px;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .metric-item {
            text-align: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 10px;
        }
        .metric-item .label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        .metric-item .value { font-size: 24px; font-weight: bold; color: #1e3a8a; }
        .tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 15px; }
        .tag {
            background: #dbeafe;
            color: #1e40af;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        .loading { text-align: center; padding: 50px; color: white; font-size: 18px; }
        .error, .success {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .error { background: #fee2e2; color: #991b1b; }
        .success { background: #d1fae5; color: #065f46; }
        .game-url {
            color: #3b82f6;
            text-decoration: none;
            font-size: 14px;
        }
        .game-url:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Game Scout - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ò–≥—Ä</h1>
            <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö –∏–≥—Ä –∏–∑ Steam –∏ Itch.io —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º</p>
            <div class="nav">
                <a href="/">üìä –ü–∏—Ç—á–∏</a>
                <a href="/games-dashboard">üéÆ –ò–≥—Ä—ã</a>
                <button class="action-btn success" onclick="collectSteam()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å Steam</button>
                <button class="action-btn success" onclick="collectItch()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å Itch.io</button>
                <button class="action-btn" onclick="loadGames()">‚ôªÔ∏è –û–±–Ω–æ–≤–∏—Ç—å –î–∞—à–±–æ—Ä–¥</button>
            </div>
        </div>
        <div id="message"></div>
        <div id="stats" class="stats"></div>
        <div id="games" class="games-grid"></div>
    </div>
    <script>
        async function loadGames() {
            const gamesDiv = document.getElementById('games');
            const statsDiv = document.getElementById('stats');
            gamesDiv.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä...</div>';
            try {
                const response = await fetch('/games?page_size=50');
                const data = await response.json();
                if (data.games.length === 0) {
                    gamesDiv.innerHTML = '<div class="loading">–ü–æ–∫–∞ –Ω–µ—Ç –∏–≥—Ä!</div>';
                    return;
                }
                const steamCount = data.games.filter(g => g.source === 'steam').length;
                const itchCount = data.games.filter(g => g.source === 'itch').length;
                statsDiv.innerHTML = `
                    <div class="stat-card"><h3>–í—Å–µ–≥–æ –∏–≥—Ä</h3><div class="value">${data.total}</div></div>
                    <div class="stat-card"><h3>Steam</h3><div class="value">${steamCount}</div></div>
                    <div class="stat-card"><h3>Itch.io</h3><div class="value">${itchCount}</div></div>
                `;
                gamesDiv.innerHTML = data.games.map(game => renderGame(game)).join('');
            } catch (error) {
                gamesDiv.innerHTML = `<div class="error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }
        
        function analyzeGame(game) {
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥
            const positive = game.metrics[0].positive_reviews || 0;
            const negative = game.metrics[0].negative_reviews || 0;
            const total = positive + negative;
            const rating = total > 0 ? Math.round((positive / total) * 100) : 0;
            const metrics = game.metrics && game.metrics.length > 0 ? game.metrics[0] : null;
            if (!metrics) {
                return "üìä –î–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º –ø–æ–∫–∞ –Ω–µ —Å–æ–±—Ä–∞–Ω—ã. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '–û–±–Ω–æ–≤–∏—Ç—å' –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ.";
            }
            
            const reviews = metrics.reviews_total || 0;
            const reviews7d = metrics.reviews_7d || 0;
            const followers = metrics.followers || 0;
            const wishlists = metrics.wishlists || 0;
            
            let analysis = [];
            
            // –ê–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
            if (reviews > 10000) {
                analysis.push("üî• –û—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –∏–≥—Ä–∞ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—Ç–∑—ã–≤–æ–≤.");
            } else if (reviews > 1000) {
                analysis.push("‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏–≥—Ä–∞ —Å —Ö–æ—Ä–æ—à–µ–π –±–∞–∑–æ–π –∏–≥—Ä–æ–∫–æ–≤.");
            } else if (reviews > 100) {
                analysis.push("üå± –†–∞—Å—Ç—É—â–∞—è –∏–≥—Ä–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–∞–±–∏—Ä–∞—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏—é.");
            } else {
                analysis.push("üÜï –ù–æ–≤–∞—è –∏–≥—Ä–∞ –∏–ª–∏ –Ω–∏—à–µ–≤—ã–π –ø—Ä–æ–µ–∫—Ç.");
            }
            
            // –ê–Ω–∞–ª–∏–∑ —Ä–µ–π—Ç–∏–Ω–≥–∞
            if (rating >= 90) {
                analysis.push(`‚≠ê –®–ï–î–ï–í–†! ${rating}% –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ - –∏–≥—Ä–æ–∫–∏ –æ–±–æ–∂–∞—é—Ç —ç—Ç—É –∏–≥—Ä—É!`);
            } else if (rating >= 80) {
                analysis.push(`üëç –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: ${rating}% –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤.`);
            } else if (rating >= 70) {
                analysis.push(`‚úÖ –•–æ—Ä–æ—à–∏–π —Ä–µ–π—Ç–∏–Ω–≥: ${rating}% –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤.`);
            } else if (rating >= 50) {
                analysis.push(`üìä –°–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã: ${rating}% –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö.`);
            } else if (total > 100) {
                analysis.push(`‚ö†Ô∏è –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: ${rating}% –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤.`);
            }
            
            // –ê–Ω–∞–ª–∏–∑ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
            const ownersMin = metrics.owners_min || 0;
            const ownersMax = metrics.owners_max || 0;
            if (ownersMax >= 100000000) {
                analysis.push(`üåç –ú–ê–°–°–û–í–´–ô –•–ò–¢! –ë–æ–ª–µ–µ ${(ownersMax/1000000).toFixed(0)}–ú –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∏–≥—Ä—ã!`);
            } else if (ownersMax >= 10000000) {
                analysis.push(`‚≠ê –û—á–µ–Ω—å —É—Å–ø–µ—à–Ω–∞—è –∏–≥—Ä–∞: ${(ownersMin/1000000).toFixed(0)}-${(ownersMax/1000000).toFixed(0)}–ú –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤.`);
            } else if (ownersMax >= 1000000) {
                analysis.push(`ÔøΩÔøΩ –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –∏–≥—Ä–∞: ${(ownersMin/1000000).toFixed(1)}-${(ownersMax/1000000).toFixed(1)}–ú –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤.`);
            }
            
            // –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –≤ –∏–≥—Ä–µ
            const playTime = metrics.average_playtime_forever || 0;
            if (playTime > 10000) {
                analysis.push(`üéÆ –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å! –ò–≥—Ä–æ–∫–∏ –ø—Ä–æ–≤–æ–¥—è—Ç ${(playTime/60).toFixed(0)} —á–∞—Å–æ–≤ –≤ –∏–≥—Ä–µ.`);
            } else if (playTime > 1000) {
                analysis.push(`üïπÔ∏è –•–æ—Ä–æ—à–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å: ${(playTime/60).toFixed(0)} —á–∞—Å–æ–≤ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–≥—Ä—ã.`);
            }
            
            // –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            const velocity = metrics.review_velocity_7d || 0;
            const momentum = metrics.momentum_ratio || 1.0;
            
            if (reviews7d > 100) {
                analysis.push("üöÄ –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å! –ú–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é.");
                if (velocity > 50) {
                    analysis.push(`üìä –°–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞: ${velocity.toFixed(0)} –æ—Ç–∑—ã–≤–æ–≤/–¥–µ–Ω—å.`);
                }
            } else if (reviews7d > 20) {
                analysis.push("üìà –•–æ—Ä–æ—à–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ —Ä–æ—Å—Ç–∞ –æ—Ç–∑—ã–≤–æ–≤.");
            } else if (reviews7d > 0) {
                analysis.push("üí§ –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é.");
            }
            
            // –ê–Ω–∞–ª–∏–∑ momentum
            if (momentum > 1.5) {
                analysis.push("‚ö° –í–ó–†–´–í–ù–û–ô –†–û–°–¢! –ò–≥—Ä–∞ –Ω–∞–±–∏—Ä–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–µ–µ —á–µ–º –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥.");
            } else if (momentum > 1.1) {
                analysis.push("üìà –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ - —Ä–æ—Å—Ç —É—Å–∫–æ—Ä—è–µ—Ç—Å—è.");
            } else if (momentum < 0.7) {
                analysis.push("ÔøΩÔøΩ –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞ - –∏–Ω—Ç–µ—Ä–µ—Å —É–≥–∞—Å–∞–µ—Ç.");
            }
            
            // –ê–Ω–∞–ª–∏–∑ wishlists
            if (wishlists > 50000) {
                analysis.push("‚≠ê –û–≥—Ä–æ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å! –ë–æ–ª–µ–µ 50k –≤ —Å–ø–∏—Å–∫–∞—Ö –∂–µ–ª–∞–µ–º–æ–≥–æ.");
            } else if (wishlists > 10000) {
                analysis.push("üíé –í—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª - –º–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–π –≤ wishlist.");
            } else if (wishlists > 1000) {
                analysis.push("üëÄ –£–º–µ—Ä–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.");
            }
            
            // –ê–Ω–∞–ª–∏–∑ followers
            if (followers > 10000) {
                analysis.push("üë• –ë–æ–ª—å—à–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.");
            } else if (followers > 1000) {
                analysis.push("üë• –†–∞—Å—Ç—É—â–µ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.");
            }
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            if (reviews7d > 50 && wishlists > 5000) {
                analysis.push("üí∞ –ò–ù–í–ï–°–¢–ò–¶–ò–û–ù–ù–ê–Ø –í–û–ó–ú–û–ñ–ù–û–°–¢–¨: –ê–∫—Ç–∏–≤–Ω—ã–π —Ä–æ—Å—Ç + –≤—ã—Å–æ–∫–∏–π –∏–Ω—Ç–µ—Ä–µ—Å.");
            }
            
            if (analysis.length === 0) {
                return "üìä –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.";
            }
            
            return analysis.join(" ");
        }
        
        function renderGame(game) {
            const latestMetrics = game.metrics && game.metrics.length > 0 ? game.metrics[0] : null;
            const analysis = analyzeGame(game);
            
            return `
                <div class="game-card">
                    <div class="game-header">
                        <div class="game-title">
                            <h2>${game.title || game.source_id || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞'}</h2>
                            <div class="source">${game.source} ‚Ä¢ ${game.release_status === 'released' ? '–í—ã–ø—É—â–µ–Ω–∞' : game.release_status === 'coming_soon' ? '–°–∫–æ—Ä–æ –≤—ã–π–¥–µ—Ç' : '–°—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}</div>
                            ${game.url ? `<a href="${game.url}" target="_blank" class="game-url">üîó –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ ${game.source}</a>` : ''}
                        </div>
                        <div class="source-badge source-${game.source}">${game.source.toUpperCase()}</div>
                    </div>
                    
                    <div class="analysis">
                        <h4>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
                        <p>${analysis}</p>
                    </div>
                    
                    ${game.description ? `<p style="color: #666; margin-bottom: 15px; line-height: 1.6;">${game.description.substring(0, 200)}${game.description.length > 200 ? '...' : ''}</p>` : ''}
                    
                    ${latestMetrics ? `
                        <div class="metrics-grid" style="grid-template-columns: repeat(6, 1fr);">
                            <div class="metric-item">
                                <div class="label">–û—Ç–∑—ã–≤—ã</div>
                                <div class="value">${latestMetrics.reviews_total?.toLocaleString() || 0}</div>
                            </div>
                            <div class="metric-item">
                                <div class="label">üëç –ü–æ–∑–∏—Ç–∏–≤</div>
                                <div class="value" style="color: #10b981">${latestMetrics.positive_reviews?.toLocaleString() || 0}</div>
                            </div>
                            <div class="metric-item">
                                <div class="label">üëé –ù–µ–≥–∞—Ç–∏–≤</div>
                                <div class="value" style="color: #ef4444">${latestMetrics.negative_reviews?.toLocaleString() || 0}</div>
                            </div>
                            <div class="metric-item">
                                <div class="label">‚≠ê –†–µ–π—Ç–∏–Ω–≥</div>
                                <div class="value" style="color: ${(() => {
                                    const p = latestMetrics.positive_reviews || 0;
                                    const n = latestMetrics.negative_reviews || 0;
                                    const total = p + n;
                                    const r = total > 0 ? Math.round((p/total)*100) : 0;
                                    return r >= 80 ? '#10b981' : r >= 70 ? '#f59e0b' : '#ef4444';
                                })()}">${(() => {
                                    const p = latestMetrics.positive_reviews || 0;
                                    const n = latestMetrics.negative_reviews || 0;
                                    const total = p + n;
                                    return total > 0 ? Math.round((p/total)*100) + '%' : '-';
                                })()}</div>
                            </div>
                            <div class="metric-item">
                                <div class="label">üåç –í–ª–∞–¥–µ–ª—å—Ü—ã</div>
                                <div class="value">${latestMetrics.owners_max ? (latestMetrics.owners_max/1000000).toFixed(0) + 'M' : '-'}</div>
                            </div>
                            <div class="metric-item">
                                <div class="label">‚è±Ô∏è –ß–∞—Å–æ–≤</div>
                                <div class="value">${latestMetrics.average_playtime_forever ? (latestMetrics.average_playtime_forever/60).toFixed(0) : '-'}</div>
                            </div>
                        </div>
                    ` : '<p style="color: #999; margin-bottom: 20px;">–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞ –Ω–µ —Å–æ–±—Ä–∞–Ω—ã. –ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å Steam" –∏–ª–∏ "–û–±–Ω–æ–≤–∏—Ç—å Itch.io" –≤—ã—à–µ.</p>'}
                    
                    <div class="tags">
                        ${game.tags.map(t => `<span class="tag">${t}</span>`).join('')}
                        ${game.has_demo ? '<span class="tag" style="background: #dcfce7; color: #15803d;">üéÆ –ï—Å—Ç—å –¥–µ–º–æ</span>' : ''}
                        ${game.price_eur ? `<span class="tag" style="background: #fef3c7; color: #92400e;">üí∞ ‚Ç¨${game.price_eur.toFixed(2)}</span>` : ''}
                    </div>
                </div>
            `;
        }
        
        async function collectSteam() {
            showMessage('üîÑ –ó–∞–ø—É—Å–∫–∞–µ–º —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ Steam...', 'loading');
            try {
                const response = await fetch('/tasks/collect/steam', { method: 'POST' });
                const data = await response.json();
                showMessage(`‚úÖ ${data.message}. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.`, 'success');
                setTimeout(loadGames, 5000);
            } catch (error) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        async function collectItch() {
            showMessage('üîÑ –ó–∞–ø—É—Å–∫–∞–µ–º —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ Itch.io...', 'loading');
            try {
                const response = await fetch('/tasks/collect/itch', { method: 'POST' });
                const data = await response.json();
                showMessage(`‚úÖ ${data.message}. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.`, 'success');
                setTimeout(loadGames, 5000);
            } catch (error) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        function showMessage(text, type) {
            const msgDiv = document.getElementById('message');
            msgDiv.innerHTML = `<div class="${type}">${text}</div>`;
            if (type !== 'loading') {
                setTimeout(() => { msgDiv.innerHTML = ''; }, 5000);
            }
        }
        
        loadGames();
        setInterval(loadGames, 30000);
    </script>
</body>
</html>
